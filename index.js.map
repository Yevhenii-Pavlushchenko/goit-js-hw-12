{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api';\nconst API_KEY = '54685682-80977b0b5ca1319a1902ced87';\nexport const perPage = 15;\naxios.defaults.baseURL = BASE_URL;\n\nexport async function request(query, page) {\n  const response = await axios({\n    url: BASE_URL,\n    method: 'get',\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: perPage,\n    },\n  });\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nexport const loadBtn = document.querySelector('.gallery-btn');\nconst loader = document.querySelector('.loader');\n\nlet lightBox = null;\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n            <li class=\"list-item\">\n                <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" /></a>\n                <div class=\"list-content\">\n                    <div>\n                        <h2 class=\"likes\">Likes</h2>\n                        <p class=\"count-likes\">${likes}</p>\n                    </div>\n                    <div>\n                        <h2 class=\"views\">Views</h2>\n                        <p class=\"count-views\">${views}</p>\n                    </div>\n                    <div>\n                        <h2 class=\"comments\">Comments</h2>\n                        <p class=\"count-comments\">${comments}</p>\n                    </div>\n                    <div>\n                        <h2 class=\"downloads\">Downloads</h2>\n                        <p class=\"count-downloads\">${downloads}</p>\n                    </div>\n                </div>\n            </li>\n        `;\n      }\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  if (lightBox) {\n    lightBox.refresh();\n  } else {\n    lightBox = new SimpleLightbox('.gallery a', {\n      captions: true,\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  }\n}\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\nexport function showLoader() {\n  loader.classList.remove('is-hidden');\n}\nexport function hideLoader() {\n  loader.classList.add('is-hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadBtn.classList.remove('is-hidden');\n  // return;\n}\nexport function hideLoadMoreButton() {\n  loadBtn.classList.add('is-hidden');\n  // return;\n}\n","import { perPage, request } from './js/pixabay-api';\nimport {\n  createGallery,\n  hideLoader,\n  hideLoadMoreButton,\n  loadBtn,\n  showLoader,\n  showLoadMoreButton,\n} from './js/render-functions';\nimport { clearGallery } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst jsImgTotal = document.querySelector('.img-total');\n\nform.addEventListener('submit', onSubmitForm);\nloadBtn.addEventListener('click', onLoadMoreClick);\nlet resInput = '';\nlet pageNum = 1;\nlet totalPages = 0;\nlet imagesCount = 0;\n\nhideLoader();\n\nasync function onSubmitForm(event) {\n  event.preventDefault();\n  imagesCount = 0;\n  pageNum = 1;\n  hideLoadMoreButton();\n  clearGallery();\n\n  resInput = form.elements['search-text'].value.trim();\n  try {\n    if (resInput === '') {\n      iziToast.warning({\n        title: 'warning',\n        position: 'topRight',\n        message: 'Please enter a search query!',\n      });\n\n      jsImgTotal.textContent = ``;\n\n      hideLoadMoreButton();\n      hideLoader();\n      clearGallery();\n      return;\n    }\n\n    showLoader();\n    const { hits, totalHits } = await request(resInput, pageNum);\n    totalPages = Math.ceil(totalHits / perPage);\n\n    imagesCount += hits.length;\n    if (imagesCount > totalHits) {\n      imagesCount = totalHits;\n    }\n    jsImgTotal.textContent = `Total images: ${imagesCount}/${totalHits}`;\n\n    if (!hits || hits.length === 0) {\n      console.log(hits);\n      iziToast.show({\n        message:\n          ' Sorry, there are no images matching your search query. Please try again!',\n        backgroundColor: `#4e75ff`,\n        messageColor: `#ffffff`,\n        position: `topRight`,\n        maxWidth: `432px`,\n      });\n      hideLoader();\n      return;\n    }\n    createGallery(hits);\n    if (pageNum < totalPages) {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    hideLoadMoreButton();\n    console.log(error.message);\n    // iziToast.show({\n    //   message: 'Please enter a search query!',\n    //   backgroundColor: `#4e75ff`,\n    //   messageColor: `#ffffff`,\n    //   position: `topRight`,\n    //   maxWidth: `432px`,\n    // });\n  } finally {\n    form.elements['search-text'].value = '';\n    hideLoader();\n  }\n}\n\nasync function onLoadMoreClick() {\n  showLoader();\n  try {\n    pageNum += 1;\n    const { hits, totalHits } = await request(resInput, pageNum);\n\n    imagesCount += hits.length;\n    if (imagesCount > totalHits) {\n      imagesCount = totalHits;\n    }\n    jsImgTotal.textContent = `Total images: ${imagesCount}/${totalHits}`;\n    if (pageNum < totalPages) {\n      showLoadMoreButton();\n    } else {\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        backgroundColor: `#4e75ff`,\n        messageColor: `#ffffff`,\n        position: `topRight`,\n        maxWidth: `432px`,\n      });\n      hideLoadMoreButton();\n    }\n\n    createGallery(hits);\n    scrollDownOnePage();\n    hideLoader();\n  } catch (error) {\n    console.log(error);\n  }\n}\nfunction scrollDownOnePage() {\n  window.scrollBy({\n    top: 1200,\n    behavior: 'smooth',\n  });\n}\n\nconst scrollTopBtn = document.querySelector('#scrollToTop');\n\n// Скрол вгору при натисканні\nscrollTopBtn.addEventListener('click', () => {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n});\n\nwindow.addEventListener('scroll', () => {\n  if (window.scrollY > 500) {\n    scrollTopBtn.classList.add('is-visible');\n  } else {\n    scrollTopBtn.classList.remove('is-visible');\n  }\n});\n"],"names":["BASE_URL","API_KEY","perPage","axios","request","query","page","gallery","loadBtn","loader","lightBox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","jsImgTotal","onSubmitForm","onLoadMoreClick","resInput","pageNum","totalPages","imagesCount","event","iziToast","hits","totalHits","error","scrollDownOnePage","scrollTopBtn"],"mappings":"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"}